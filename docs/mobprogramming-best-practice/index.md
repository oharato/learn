# モブプログラミング・ベストプラクティス

- モブプログラミング・ベストプラクティス ソフトウェアの品質と生産性をチームで高める｜日経BPブックナビ【公式サイト】 : <https://www.nikkeibp.co.jp/atclpubmkt/book/19/P89640/>
- 世界中の人々がモビングのメリットを認識 <https://markpearlcoza.github.io/Talk_PeopleMobbing/>
  - <https://mobprogramming.org/>
- 原著 <https://pragprog.com/book/mpmob>

- 具体的な内容として下記の章を読むと手っ取り早い
  - 1. なぜモブプロ？
  - 2. モビングの始め方
  - 5. 定期的なモビングのための仕事場の改造

## 1. なぜモブプロ？

### モブプログラミングとは？

- 3人以上の人々が1台のコンピュータの前に座って協力しながら問題を解決していくこと
- 分散知識(destributed knowlegde)、人間の集団が持っている問題解決に役立てられる知識の総体
- ペアプログラミングではドライバーとナビゲーター、モブプロではタイピストとその他のモブ

### モビングとペアリング
- モブプロの長所
  - ペアプロよりも対立しにくい
  - ペアプロよりも中断しにくい

### 上層部からのお墨付きのもらい方
- モブプロの考え方はフロー重視。機能を安く作るのではなく、早く完成させる。
  - 新機能の開発コストを下げるよりも、新機能を早く市場に送り出した方が大きな利益が得られるときはフロー効率を重視したほうが良い
- キーパーソンへの依存度を下げ、チーム全体のスキルの底上げができる
- モブプログラミングはフロー効率を上げるが、チームがチームとして固まってくるまである程度の時間をかけなければフロー効率が上がったと言えない
  - Agile Africa 2016 Talk: How we reduced delivery time by 30% using Mob Programming - YouTube : <https://www.youtube.com/watch?v=cKH1zyJf5h8>

### モビングに幻滅してしまった人との接し方

### 次は？


## 2. モビングの始め方

### 最初のモビングのための準備

1. 実験として位置づける
   1. セッションが終わるたびにうまくいったこと、直すことをグループで評価して、これからも続けるか判断する
2. 参加する人を決める
   1. 最初のうちは3,4人が良い
3. 場所
   1. 会議室がおすすめ。大画面とホワイトボードがあるから。
   2. ポストイットは小さいので全員がひと目で理解できる図が描けないのですすめない。ホワイトボードとポストイットの併用はあり。
4. 解きたい問題として適切なものを選ぶ
   1. 最初は納期が迫っておらず全員が同じ立場で向き合える問題が良い
   2. CodeKata : <http://codekata.com/>
5. モビング用のマシン
   1. ラップトップになることが多いが欠点あり
      1. 他のメンバーに渡しにくい、キーボードレイアウトが特殊
      2. 外付けキーボードを用意するのがおすすめ
   2. モブ全員が使い方を知っているエディタを入れておく
      1. フォントサイズを大きくする
      2. ショートカットキーの設定
      3. 行番号の表示をオン
6. タイマーを用意
   1. 全員が見られるようなタイマー（ディスプレイに表示）
      1. <https://agility.jahed.dev/timer.html>
         1. webアプリ。見やすくて良い
      2. <https://github.com/pluralsight/mob-timer>
         1. electron製、ビルド面倒


### モビングのためのレシピ

- モビングセッション
  - 準備（お膳立て）、30分
  - 本体、1時間30分
  - しめくくり、20分

### お膳立て

- モブプログラミングのコンセプトを説明する
  - <https://markpearlcoza.github.io/MobProgrammingIntroduction/>
    - 10枚位の英語のざっくり説明スライド。
- 忘れずに言っておきたいこと３つ
  - モブプログラミングとは、協力して一つの問題を解決するために、1台のコンピューターの前に数人が集まって共同作業することである
    - モビングする人々の一日 <https://www.youtube.com/watch?v=Ev7uus12HRY>
  - モビングを効果的なものにするためには、モブの一人ひとりのメンバーがフロー効率重視の考え方を確立していく必要がある。それは、課題の完成に向かって歩みが滞らないように、チームの一員として協力しあっていくという考え方である。
    - ※フロー重視、リソース重視を説明しないといけない
  - フロー重視の考え方を確立するために必要なスキルを身につけるためには練習が必要だが、決して不可能なことではない。世界中のチームがこれを成功させている
    - <https://markpearlcoza.github.io/Talk_PeopleMobbing/>
- モビングする人々の一日の動画を見たら、「タイピスト」と「その他のモブ」の役割分担を説明する
- タイピスト
  - なるのは一人だけ
  - プログラマーではない。その他のモブがしてくれといったことを取り入れて実装するだけ。
  - ポイント
    - 他のモブからの依頼を理解する
    - 理解できないときは質問する
    - 頼まれたことをコードの形に実装する
    - その他のモブを信頼する。自分では通常試さないようなことを躊躇せず試す
    - ショートカットキーやツールの使い方などの新しいことを学ぶ
  - コードで表現されていないものに反論しない。コードで表現してから議論する。
  - タイピストが実装のアイディアが浮かんだときは
    - その他のモブにアイディアを説明して実装に賛成してもらう
    - 他の人にタイピストを変わってもらい、自分はその他のモブになる
- その他のモブ
  - ポイント
    -  問題解決するための力になる
    -  理解できるまで質問する
    -  モブ全体の理解の水準を上げるために貢献する
    -  目の前の問題に集中する
    -  他のメンバーの意見を聞く
    -  必要な情報を予測する
    -  システムの中の改善すべき部分を探す
- 解決しようとする問題の概要を紹介する
  - 問題にどう取り組むかについてのプランは一致していなければならない
  - ホワイトボードに問題解決のための様々なアプローチを書いて全員でブレスト、15分。
  - 意見が一致したら、ホワイトボードにおおよその手順を書き出す
  - 細かいことは実際のモビングインターバルで考える
- タイピストの順番
  - 全員が見られるようにホワイトボードなどに書き出す



### モビングインターバル
- モビングセッション（2時間）＝モビングインターバル（10分）×人数
- モビングインターバルのメカニズム <https://www.youtube.com/watch?v=DRo6wWuQY2Q>
- まずどこから始めるか
  - トップダウン方式かボトムアップ方式か
  - TDD的にまずどういうテストを書いたら良いか
  - すり合わせも必要だができるだけコードを書く方向で。
- タイピストが交代したらマイクロコミットする
  - コミットメッセージなし
  - 行き詰まったときは簡単に戻りたいところまで戻れる
  - 誰のアカウントを使うか？
    - モブの中の誰か
    - 共有アカウント


### 経験からの学習
- セッションの最後の20分は、レトロスペクティブ（反省会）
- シンキングハット法
  - 考える対象を明確に切り分ける
- 6ステップ
  - 仕組みの説明、4分
    - ホワイトボードに4つの欄を書く、縦に4つに区切る
    - 白：事実と数字、黄色：肯定的感想、黒：批判的感想、緑色：問題解決、とタイトルを欄に書く
    - 全員が同じ色の帽子をかぶったつもりになって、各帽子の観点からモビングセッションについて議論する
    - 帽子をかぶる時間は限られている
    - 進行役は、誰かが間違った色の帽子の議論をしたら遮って、今の帽子の内容に戻す
    - アイディアをポストイットに書いてホワイトボードに貼っていく
  - 白：事実と数字、2分
    - 例、タイピストを10分ごとに交代させた
    - 例、フォントサイズは16ポイントだった
    - 意見はダメ、事実のみ
  - 黄色：肯定的感想、3分
    - 一番うまく言ったことは、、、
    - 予想外に簡単だったことは、、、
    - セッションで良いと思ったことは、、、
  - 黒：批判的感想、3分
    - 解決方法まで踏み込んでいたら、分割する
  - 緑色：問題解決、5分
    - 批判的感想に注目し、どうすれば改善できるか
    - 提案するだけ。却下されない
  - 軌道修正すべきことの決定、合意形成、3分
    - 次のモビングセッションで変えることを一つ決める


### 次は？



## 3. モビングと人

### 最初は共感から

### 協調的なマインドセットの獲得

### 性格特徴のビッグファイブモデル
- 他のメンバーを理解するのに「性格特徴のビッグファイブモデル」が役に立つ
  - 経験に対する開放性
  - 真面目度
  - 協調性
  - 情緒安定性
  - 外向性


### 個性タイプについてのグループセッション
- 無料
  - <http://www.truity.com/test/big-five-personality-test>
  - <http://www.123test.com/big-five-personality-theory>
  - <http://www.viacharacter.org/www/>
- 有料
  - <http://www.gallupstrengthscenter.com>

### 次は？


## 4. モビングの軌道修正

### エキスパートがいるモビング
- エキスパートがタイピストになると、他のモブがついていけない
  - エキスパートにはタイピストを回さない。エキスパートをモブのコーチにする

### 手探りで進めていくような仕事のモビング
- タイムボックス付きの探求
  - 目の前の課題に対する理解を深めるために、モブの個々のメンバーにそれぞれの考えを掘り下げていく時間を与える
  - オンラインマニュアルを読む、チュートリアルを試す、など
  - 各メンバーが必要な時間を持ち寄り、もっとも短い時間を選ぶ。30分以上のものばかりなら30分にする
  - 誰かが必要な知識を突き止めたら、モブを集め知識を共有する
  - 時間が過ぎても誰も必要な知識が得られなかったら、学んだことについて簡単に報告し合う
- 強いモビング
  - よくわからない・・・
  - 進行役を決める。タイピストは進行役の指示だけを受ける
  - 進行役はホワイトボードにアイディアを書き出す。どのアイディアを試すかはモブが決める

### 些末な仕事のモビング
- <http://github.com/willemlarsen/mobprogrammingrpg>
  - 見たけどよくわからなかった

### 次は？


## 5. 定期的なモビングのための仕事場の改造

### 仕事場改造の指導原則

- 買う前に試す
- 固定よりも可動
- 遠いより近い
- スペースは重要


### 典型的なモビングレイアウト

- 画面サイズから、テーブルと画面の距離を計算するツール <http://www.rtings.com/tv/reviews/by-size/size-to-distance-relationship>
  - 32インチで1.37m, 40インチで1.71m, 50インチで2.13m

### 必要な設備装置

- 画面
  - 大きいほうが良い。筆者の4人のモブでは60インチの4K画面
  - 複数画面でも良い
- ホワイトボード
- テーブル
- 専用のモビングマシン
- マウスとキーボード

### オープンオフィスの改造

- モビングするとうるさくなるので騒音対策必要かも
- おしゃべり禁止の場所ではモビングできない

### チームルール

### コストについて一言

### 次は？


## 6. モビングを定着させるためのチームへの働きかけ

- 2本足の掟
  - 自分が学習してもいないし役に立ってもいないと感じたときにはすぐに2本の足を使ってどこか別の場所に行け

## 7. フロー重視の考え方

- バットマン
  - 割り込みの仕事を最初に受ける窓口
  - 軍隊用語

## 8. モビング定着後の長期的な展望

### モビングの遅さ
- モビングが遅いと感じる本当の理由をはっきりさせることが大切。全般的にそう感じるのか、モブの誰かが遅いのか
- 遅いという漠然とした感じ
  - それは誤解
  - 通常の仕事を遅らせる原因がなくなっているはず。考えを一致させながら奨めているのでコードレビューはないし、打ち合わせも少なくなっている
  - コード作成部分だけ見れば遅いかもしれないが、全体を見れば早い
- 誰かが作業を遅らせている
  - 納期が厳しい仕事の場合、例外的に意識的にスピードアップする
  - 遅い理由を探り、状況の改善に役立てる
    - ドメインの知識不足
    - 技術的な知識不足
    - キー入力が遅い
- 直接意見する文化を構築する
  - ほとんどの開発者は、技術的なことを話し合うのは得意だが、そうでないことを直接話し合うのは苦手

## あとがき
- モブプログラミングは極論すれば「チームで一緒に働く」だけ
  - 総務部のチームがモビングしている事例もある
  - モブ「ワーク」の方が実態にあっているかも


## メモ
- 「モブプログラミング・ベストプラクティス」読んだのでモブプロの魅力と始め方をまとめる <https://aloerina01.github.io/blog/2019-03-12-1>
- A day of Mob Programming 2016 - YouTube : <https://www.youtube.com/watch?v=dVqUcNKVbYg>